<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Elterninformation</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
@page {
    size: A4;
    margin: 18mm;
}

body {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 10.5pt;
    margin: 0;
    background: #fff;
}

.page {
    width: 174mm;
    margin: 0 auto;
    padding-top: 18mm;
}

h1 {
    font-size: 13pt;
    font-weight: bold;
    border: 1px solid #000;
    border-bottom: none;
    padding: 6px;
    margin: 0;
}

table {
    width: 100%;
    border-collapse: collapse;
}

.info-table td {
    border: 1px solid #000;
    padding: 4px;
    vertical-align: middle;
}

.label {
    width: 23%;
    white-space: nowrap;
}

input[type="text"],
input[type="date"] {
    width: 100%;
    border: none;
    outline: none;
    font-size: 10.5pt;
    font-family: inherit;
    background: transparent;
}

textarea {
    width: 100%;
    border: none;
    outline: none;
    resize: none;
    font-family: inherit;
    font-size: 10.5pt;
    background: transparent;
}

.section {
    border-left: 1px solid #000;
    border-right: 1px solid #000;
    padding: 10px;
}

.textarea-line {
    border-bottom: 1px solid #000;
    margin-bottom: 10px;
    padding-bottom: 4px;
}

.consequence-table {
    border: 1px solid #000;
    margin-top: 8px;
}

.consequence-table th,
.consequence-table td {
    border: 1px solid #000;
    padding: 4px;
    vertical-align: top;
}

.checkbox-col {
    width: 28px;
    text-align: center;
}

.bold {
    font-weight: bold;
}

.signature-section {
    border: 1px solid #000;
    border-top: none;
    padding: 12px 10px 35px 10px;
}

.signature-row {
    display: flex;
    justify-content: space-between;
    margin-top: 35px;
}

.signature {
    width: 45%;
    text-align: center;
}

.signature-line {
    border-bottom: 1px solid #000;
    height: 35px;
    margin-bottom: 4px;
}

.button-bar {
    text-align: center;
    margin: 20px 0;
}

button {
    padding: 6px 18px;
    font-size: 10.5pt;
    margin: 0 8px;
    cursor: pointer;
}

@media print {
    .button-bar {
        display: none;
    }
    body {
        margin: 0;
    }
    .page {
        padding-top: 0;
    }
}
</style>

<script>
function printForm() {
    window.print();
}

function downloadPDF() {
    const element = document.querySelector(".page");

    const name = document.getElementById("schueler").value || "Unbekannt";
    const date = document.getElementById("datum").value || new Date().toISOString().slice(0,10);

    const safeName = name.replace(/\s+/g, "_");

    const opt = {
        margin: 10,
        filename: `Elterninformation_${safeName}_${date}.pdf`,
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
    };

    html2pdf().set(opt).from(element).save();
}
</script>

</head>
<body>

<div class="page">

<h1>Elterninformation</h1>

<form>

<table class="info-table">
<tr>
    <td class="label">Name Schüler*In:</td>
    <td><input type="text" id="schueler"></td>
    <td class="label">Klasse:</td>
    <td><input type="text"></td>
</tr>
<tr>
    <td class="label">Ausgegeben am:</td>
    <td><input type="date" id="datum"></td>
    <td class="label">Ausgegeben von:</td>
    <td><input type="text"></td>
</tr>
</table>

<div class="section">
    <p>Sehr geehrte Eltern, sehr geehrte Betreuer*Innen,</p>

    <p>Ihre/Ihr Schüler*In hat heute folgenden groben Regelverstoß begangen:</p>
    <div class="textarea-line">
        <textarea rows="3"></textarea>
    </div>

    <p>Dieses Verhalten hat folgende Konsequenzen:</p>

    <table class="consequence-table">
        <tr>
            <th class="checkbox-col">X</th>
            <th>Konsequenz</th>
        </tr>
        <tr>
            <td class="checkbox-col"><input type="checkbox"></td>
            <td>
                Erteilung des 
                <input type="text" style="width:35px; border-bottom:1px solid #000;">
                Strafpunkts laut Maßnahmenkatalog
            </td>
        </tr>
        <tr>
            <td class="checkbox-col"><input type="checkbox"></td>
            <td>Bearbeitung eines Bogens zur Verhaltensreflexion in der GTA-Stunde in Begleitung einer Lehrkraft</td>
        </tr>
        <tr>
            <td class="checkbox-col"><input type="checkbox"></td>
            <td>Teilnahme an einer Streitschlichtung</td>
        </tr>
        <tr>
            <td class="checkbox-col"><input type="checkbox"></td>
            <td>Nacharbeit des verpassten Unterrichtsstoffs (Die Lehrkraft behält sich vor, diese zu bewerten.)</td>
        </tr>
        <tr>
            <td class="checkbox-col"><input type="checkbox"></td>
            <td>Unentschuldigte Fehlstunde</td>
        </tr>
    </table>

    <p class="bold" style="margin-top:8px;">
        Bitte klären und besprechen Sie diesen Vorfall und die Konsequenzen mit Ihrer/Ihrem Schüler*In.
    </p>

    <p>Mit freundlichen Grüßen</p>
</div>

<div class="signature-section">

    <div style="text-align:right; font-weight:bold;">
        Kenntnisnahme der Eltern/Betreuer*Innen:
    </div>

    <div class="signature-row">
        <div class="signature">
            <div class="signature-line"></div>
            (Unterschrift ausstellende Lehrkraft)
        </div>

        <div class="signature">
            <div class="signature-line"></div>
            (Unterschrift Eltern/Betreuer*Innen)
        </div>
    </div>

</div>

</form>

</div>

<div class="button-bar">
    <button onclick="printForm()">Drucken</button>
    <button onclick="downloadPDF()">PDF herunterladen</button>
</div>

</body>
</html>
